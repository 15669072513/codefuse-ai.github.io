<!DOCTYPE html>
<html lang="en-CN">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="介绍主要功能">
<meta name="author" content="codefuse-ai">

<title>MFTCoder: 高效准确的多任务大模型微调框架 · CodeFuse-AI</title>

<link rel="canonical" href="/zh/docs/overview/mftcoder-zh/">









<link rel="stylesheet" href="/scss/base.css" integrity="">



<link rel="stylesheet" href="/scss/theme/default.css" integrity="">



<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/img/icon/favicon.ico">
<link rel="icon" href="/img/icon/icon-16.png" sizes="16x16" type="image/png">
<link rel="icon" href="/img/icon/icon-32.png" sizes="32x32" type="image/png">
<link rel="apple-touch-icon" href="/img/icon/icon-180.png" sizes="180x180">
<meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#121212" media="(prefers-color-scheme: dark)">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-xxxx"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-xxxx');
</script>


  
  

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css">
  </head>
  <body>
    <header id="site-header">
  
  <div id="site-header-brand">
    <a href="/">CodeFuse-AI</a>
  </div>

  
  <div id="site-header-controls">
    
    <div class="dropdown">
      <button class="dropdown-btn" aria-haspopup="menu" aria-label="theme selector">
        <i class="icon icon-brightness"></i>
        <i class="icon icon-select"></i>
      </button>
      <ul role="menu" class="dropdown-menu">
        <li role="menuitem"><button class="color-scheme" data-value="light"><i class="icon icon-light-mode"></i> Light</button></li>
        <li role="menuitem"><button class="color-scheme" data-value="dark"><i class="icon icon-dark-mode"></i> Dark &nbsp;</button></li>
        <li role="menuitem"><button class="color-scheme" data-value="night"><i class="icon icon-night-mode"></i> Night</button></li>
      </ul>
    </div>

    
    <div class="dropdown">
      <button class="dropdown-btn" aria-haspopup="menu" aria-label="language selector">
        <i class="icon icon-translate"></i>
        <i class="icon icon-select"></i>
      </button>
      <ul role="menu" class="dropdown-menu">
        
          
          <li role="menuitem"><a href="/docs/overview/mftcoder/">English</a></li>
          
          <li role="menuitem"><a href="/zh/docs/overview/mftcoder-zh/">中文</a></li>
          
        
      </ul>
    </div>
  </div>

  
  <div id="site-header-menu">
    <nav>
      <ul>
        
        
        
          
          <li><a href="/" ><i class='icon icon-home'></i>Home</a></li>
        
          
          <li><a href="/docs"  class="active"><i class='icon icon-book'></i>Overview</a></li>
        
          
          <li><a href="/muagent" ><i class='icon icon-book'></i>MuAgent</a></li>
        
          
          <li><a href="/contribution" ><i class='icon icon-book'></i>Contribution</a></li>
        
      </ul>
    </nav>
  </div>

  
  <div id="site-header-search"></div>
</header>
    
<div id="site-main-content-wrapper">
  
  
    <aside id="sidebar">
  <span class="btn-close"><i class="icon icon-close"></i></span>

  <div class="sticky"><strong class="sidebar-section">📖 CodeFuse-AI 整体介绍</strong>
          
          <a class="sidebar-link " href="/docs/%E6%A6%82%E8%A7%88/">
            
              概览
            
          </a>

        <strong class="sidebar-section">📖 CodeFuse-AI 模块</strong>
          
          <a class="sidebar-link " href="/docs/codefuse-query-zh/">
            
              CodeFuse-Query
            
          </a>

        
          
          <a class="sidebar-link current" href="/docs/mftcoder-zh/">
            
              MFTCoder
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/codefuse-mft-vlm-zh/">
            
              CodeFuse-MFT-VLM
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/test-agent-zh/">
            
              Test-Agent
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/codefuse-modelcache-zh/">
            
              CodeFuse-ModelCache
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/codefuse-chatbot-zh/">
            
              CodeFuse-ChatBot
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/codefuse-devops-eval-zh/">
            
              CodeFuse-DevOps-Eval
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/codefuse-devops-model-zh/">
            
              CodeFuse-DevOps-Model
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/codefuse-evalution-zh/">
            
              CodeFuse-Evalution
            
          </a>

        <strong class="sidebar-section">CodeFuse-Query</strong>
          
          <a class="sidebar-link " href="/docs/codefuse-query-introduction-zh/">
            
              基本介绍
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/codefuse-query-quickstart-zh/">
            
              快速开始
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/codefuse-query-godellanguage-zh/">
            
              查询语言介绍
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/codefuse-query-toolchain-zh/">
            
              VSCode插件
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/codefuse-query-usercase-zh/">
            
              用户案例
            
          </a>

        <strong class="sidebar-section">MFTCoder</strong>
          
          <a class="sidebar-link " href="/docs/mftcoder-introduction-zh/">
            
              基本介绍
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/mftcoder-quickstart-zh/">
            
              快速使用
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/mftcoder-accelerate-zh/">
            
              Accelerate &#43; DeepSpeed/FSDP 框架篇
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/mftcoder-atorch-zh/">
            
              Atorch框架篇
            
          </a>

        <strong class="sidebar-section">CodeFuse-MFT-VLM</strong>
          
          <a class="sidebar-link " href="/docs/codefuse-mft-vlm-quickstart-zh/">
            
              快速使用
            
          </a>

        <strong class="sidebar-section">🌱 Test Agent</strong>
          
          <a class="sidebar-link " href="/docs/test-agent-quickstart-zh/">
            
              快速开始
            
          </a>

        <strong class="sidebar-section">🌱 CodeFuse-ModelCache</strong>
          
          <a class="sidebar-link " href="/docs/codefuse-modelcache-quickstart-zh/">
            
              快速开始
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/codefuse-modelcache-feature-zh/">
            
              功能特性
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/codefuse-modelcache-config-zh/">
            
              最佳配置
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/codefuse-modelcache-release-zh/">
            
              版本记录
            
          </a>

        <strong class="sidebar-section">🌱 CodeFuse-ChatBot</strong>
          
          <a class="sidebar-link " href="/docs/codefuse-chatbot-quickstart-zh/">
            
              快速开始
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/%E5%90%AF%E5%8A%A8%E6%98%8E%E7%BB%86/">
            
              启动明细
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/%E6%9C%AC%E5%9C%B0%E7%A7%81%E6%9C%89%E5%8C%96%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%8E%A5%E5%8F%A3%E6%8E%A5%E5%85%A5/">
            
              本地私有化&amp;大模型接口接入
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/chatbot-%E6%8A%80%E6%9C%AF%E8%B7%AF%E7%BA%BF/">
            
              ChatBot 技术路线
            
          </a>

        <strong class="sidebar-section">🌱 CodeFuse-DevOps-Model</strong>
          
          <a class="sidebar-link " href="/docs/codefuse-devops-model-train-zh/">
            
              训练解析
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/codefuse-devops-model-quickstart-zh/">
            
              快速使用
            
          </a>

        <strong class="sidebar-section">🌱 CodeFuse-DevOps-Eval</strong>
          
          <a class="sidebar-link " href="/docs/%E6%95%B0%E6%8D%AE%E4%BB%8B%E7%BB%8D/">
            
              数据介绍
            
          </a>

        
          
          <a class="sidebar-link " href="/docs/codefuse-devops-eval-quickstart-zh/">
            
              快速开始
            
          </a>

        <strong class="sidebar-section">🌱 CodeFuse-evalution</strong>
          
          <a class="sidebar-link " href="/docs/codefuse-evalution-quickstart-zh/">
            
              快速开始
            
          </a>

        
  </div>
</aside>
  
  <main>
    <article id="article">
      <nav id="article-nav">
  <button id="article-nav-menu-btn"><i class="icon icon-menu"></i> On this section</button>
  
</nav>
      <header id="article-header">
  <h1>MFTCoder: 高效准确的多任务大模型微调框架</h1>
</header>
      <div id="article-content">
        
        
        <div align="center">
<p>
    🤗 <a href="https://huggingface.co/codefuse-ai" target="_blank" target="_blank">HuggingFace</a>
    • 🤖 <a href="https://modelscope.cn/organization/codefuse-ai" target="_blank" target="_blank">魔搭</a>
</p>
<p>[<strong>中文</strong>] <a href="/docs/mftcoder">[English]</a></p>
</div>
<h2 id="目录">目录</h2>
<ul>
<li><a href="#%E6%96%B0%E9%97%BB">新闻</a></li>
<li><a href="#%E6%96%87%E7%AB%A0">文章</a></li>
<li><a href="#%E9%A1%B9%E7%9B%AE%E7%AE%80%E4%BB%8B">项目简介</a></li>
<li><a href="#%E7%8E%AF%E5%A2%83">环境</a></li>
<li><a href="#%E8%AE%AD%E7%BB%83">训练</a></li>
<li><a href="#%E6%A8%A1%E5%9E%8B">模型</a></li>
<li><a href="#%E6%95%B0%E6%8D%AE%E9%9B%86">数据集</a></li>
</ul>
<h2 id="新闻">新闻</h2>
<p>🔥🔥🔥 [2024/01/17] <strong>MFTCoder-v0.3.0</strong>发布。新增对Mixtral(MoE), DeepSeek等模型的支持；新增支持FSDP(Fully Sharded Data Parallel)；新增Self-paced Loss, 支持多任务收敛均衡。 感兴趣详见微信公众号CodeFuse的文章<a href="https://mp.weixin.qq.com/s/xI3f0iUKq9TIIKZ_kMtcQg" target="_blank">MFTCoder 重磅升级v0.3.0发布</a></p>
<p>🔥🔥🔥 [2024/01/17] 开源了<a href="https://huggingface.co/codefuse-ai/CodeFuse-DeepSeek-33B" target="_blank">CodeFuse-DeepSeek-33B</a>模型，在HumanEval pass@1(greedy decoding)上可以达到78.7%。该模型在Big Code榜单的结果近期发布，请关注公众号获取最新信息。</p>
<p>🔥🔥🔥 [2024/01/17] 开源了<a href="https://huggingface.co/codefuse-ai/CodeFuse-Mixtral-8x7B">CodeFuse-Mixtral-8x7B</a>模型，在HumanEval pass@1(greedy decoding)上可以达到56.1%。感兴趣详见微信公众号CodeFuse的文章<a href="https://mp.weixin.qq.com/s/xI3f0iUKq9TIIKZ_kMtcQg" target="_blank">MFTCoder提升Mixtral-8x7B混合专家模型的代码能力实践</a></p>
<p>🔥🔥 [2023/11/07] <a href="https://arxiv.org/abs/2311.02303" target="_blank">MFTCoder论文</a>在Arxiv公布，介绍了多任务微调的技术细节。</p>
<p>🔥🔥 [2023/10/20] 开源了<a href="https://huggingface.co/codefuse-ai/CodeFuse-QWen-14B">CodeFuse-QWen-14B</a>模型，在HumanEval pass@1(greedy decoding)上可以达到48.8%。相比较与基座模型Qwen-14b提升16%。感兴趣详见微信公众号CodeFuse<a href="https://mp.weixin.qq.com/s/PCQPkvbvfxSPzsqjOILCDw" target="_blank">文章</a></p>
<p>🔥🔥 [2023/09/27] 开源了<a href="https://huggingface.co/codefuse-ai/CodeFuse-StarCoder-15B" target="_blank">CodeFuse-StarCoder-15B</a>模型，在HumanEval pass@1(greedy decoding)上可以达到54.9%。</p>
<p>🔥🔥 [2023/09/26] <a href="https://huggingface.co/codefuse-ai/CodeFuse-CodeLlama-34B-4bits" target="_blank">CodeFuse-CodeLlama-34B-4bits</a>量化版本发布，量化后模型在HumanEval pass@1指标为73.8% (贪婪解码)。</p>
<p>🔥🔥 [2023/09/07]MFTCoder微调的模型<strong>CodeFuse-CodeLlama-34B</strong>在<a href="https://github.com/openai/human-eval" target="_blank">HumanEval Benchmarks</a>的Python <strong>Pass@1</strong> 取得了<strong>74.4%</strong>（greedy decoding）的开源SOTA成绩。</p>
<p>🔥🔥 [2023/08/26]MFTCoder-v0.1.0 支持使用LoRA/QLoRA对Code Llama、Llama、Llama2、StarCoder、ChatGLM2、CodeGeeX2、Qwen和GPT-NeoX模型进行微调。</p>
<h3 id="humaneval表现">HumanEval表现</h3>
<table>
<thead>
<tr>
<th style="text-align:left">模型</th>
<th style="text-align:center">HumanEval(Pass@1)</th>
<th style="text-align:center">日期</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>CodeFuse-DeepSeek-33B</strong></td>
<td style="text-align:center"><strong>78.7%</strong></td>
<td style="text-align:center">2024/01</td>
</tr>
<tr>
<td style="text-align:left"><strong>CodeFuse-CodeLlama-34B</strong></td>
<td style="text-align:center"><strong>74.4%</strong></td>
<td style="text-align:center">2023/09</td>
</tr>
<tr>
<td style="text-align:left"><strong>CodeFuse-CodeLlama-34B-4bits</strong></td>
<td style="text-align:center"><strong>73.8%</strong></td>
<td style="text-align:center">2023/09</td>
</tr>
<tr>
<td style="text-align:left">WizardCoder-Python-34B-V1.0</td>
<td style="text-align:center">73.2%</td>
<td style="text-align:center">2023/08</td>
</tr>
<tr>
<td style="text-align:left">GPT-4(zero-shot)</td>
<td style="text-align:center">67.0%</td>
<td style="text-align:center">2023/03</td>
</tr>
<tr>
<td style="text-align:left">PanGu-Coder2 15B</td>
<td style="text-align:center">61.6%</td>
<td style="text-align:center">2023/08</td>
</tr>
<tr>
<td style="text-align:left"><strong>CodeFuse-Mixtral-8x7B</strong></td>
<td style="text-align:center"><strong>56.1%</strong></td>
<td style="text-align:center">2024/01</td>
</tr>
<tr>
<td style="text-align:left"><strong>CodeFuse-StarCoder-15B</strong></td>
<td style="text-align:center"><strong>54.9%</strong></td>
<td style="text-align:center">2023/08</td>
</tr>
<tr>
<td style="text-align:left">CodeLlama-34b-Python</td>
<td style="text-align:center">53.7%</td>
<td style="text-align:center">2023/08</td>
</tr>
<tr>
<td style="text-align:left"><strong>CodeFuse-QWen-14B</strong></td>
<td style="text-align:center"><strong>48.8%</strong></td>
<td style="text-align:center">2023/10</td>
</tr>
<tr>
<td style="text-align:left">CodeLlama-34b</td>
<td style="text-align:center">48.8%</td>
<td style="text-align:center">2023/08</td>
</tr>
<tr>
<td style="text-align:left">GPT-3.5(zero-shot)</td>
<td style="text-align:center">48.1%</td>
<td style="text-align:center">2022/11</td>
</tr>
<tr>
<td style="text-align:left">OctoCoder</td>
<td style="text-align:center">46.2%</td>
<td style="text-align:center">2023/08</td>
</tr>
<tr>
<td style="text-align:left">StarCoder-15B</td>
<td style="text-align:center">33.6%</td>
<td style="text-align:center">2023/05</td>
</tr>
<tr>
<td style="text-align:left">QWen-14B</td>
<td style="text-align:center">32.3%</td>
<td style="text-align:center">2023/10</td>
</tr>
</tbody>
</table>
<h2 id="文章">文章</h2>
<p>🔥 <a href="https://mp.weixin.qq.com/s/kWMtHIoe3ytN8pRVi_CHZg" target="_blank">CodeFuse-MFTCoder提升CodeGeeX2-6B代码能力</a></p>
<p>🔥 <a href="https://mp.weixin.qq.com/s/PCQPkvbvfxSPzsqjOILCDw" target="_blank">CodeFuse-MFTCoder提升Qwen-14B代码能力</a></p>
<h2 id="项目简介">项目简介</h2>
<p><strong>国际首个高精度、高效率、多任务、多模型支持、多训练算法，大模型代码能力微调框架；</strong></p>
<p><strong>Codefuse-MFTCoder</strong> 是一个开源的多任务代码大语言模型项目，包含代码大模型的模型、数据、训练等。我们希望通过开源，分享交流大语言模型在代码领域的进步。</p>
<h3 id="项目框架">项目框架</h3>
<p><img src="/images/mftcoder/img_1.jpg" alt="img_1.jpg"></p>
<h3 id="项目优势">项目优势</h3>
<p>:white_check_mark: <strong>多任务</strong>：一个模型同时支持多个任务，会保证多个任务之间的平衡，甚至可以泛化到新的没有见过的任务上去；</p>
<p>:white_check_mark: <strong>多模型</strong>：支持最新的多个开源模型，包括gpt-neox，llama，llama-2，baichuan，Qwen，chatglm2等；</p>
<p>:white_check_mark: <strong>多框架</strong>：既支持主流开源的Accelerate+DeepSpeed/FSDP，也支持新开源的<a href="https://github.com/intelligent-machine-learning/dlrover" target="_blank">ATorch 框架</a>；</p>
<p>:white_check_mark: <strong>高效微调</strong>：支持LoRA和QLoRA，可以用很少的资源去微调很大的模型，且训练速度能满足几乎所有微调场景；</p>
<p>本项目主要内容如下：</p>
<ul>
<li>同时支持单任务SFT(Supervised FineTuning)和MFT(Multi-task FineTuning), 当前开源支持数据均衡，未来将持续开源难易均衡， 收敛均衡等</li>
<li>支持QLoRA低成本高效指令微调、LoRA高效指令微调、全量参数高精度微调。</li>
<li>支持绝大部分主流的开源大模型，重点关注代码能力优秀的开源大模型，如DeepSeek-coder, Mistral, Mistral(MoE), Chatglm3, Qwen, GPT-Neox, Starcoder, Codegeex2, Code-LLaMA等。</li>
<li>支持lora与base model进行权重合并，推理更便捷。</li>
<li>整理并开源2个指令微调数据集：<a href="https://huggingface.co/datasets/codefuse-ai/Evol-instruction-66k">Evol-instruction-66k</a>和<a href="https://huggingface.co/datasets/codefuse-ai/CodeExercise-Python-27k" target="_blank">CodeExercise-Python-27k</a>。</li>
<li>开源多个[Codefuse系列指令微调模型权重]，具体参见我们的huggingface组织和modelscope组织下的模型：<a href="https://huggingface.co/codefuse-ai">codefuse-ai huggingface</a> or <a href="https://modelscope.cn/organization/codefuse-ai" target="_blank">codefuse-ai 魔搭</a>。
|</li>
</ul>
<h2 id="引用">引用</h2>
<p>如果你觉得我们的工作对你有帮助，请引用我们的论文</p>
<pre tabindex="0"><code>@article{mftcoder2023,
      title={MFTCoder: Boosting Code LLMs with Multitask Fine-Tuning}, 
      author={Bingchang Liu and Chaoyu Chen and Cong Liao and Zi Gong and Huan Wang and Zhichao Lei and Ming Liang and Dajun Chen and Min Shen and Hailian Zhou and Hang Yu and Jianguo Li},
      year={2023},
      journal={arXiv preprint arXiv},
      archivePrefix={arXiv},
      eprint={2311.02303}
}
</code></pre>
      </div>
      








  
  
  
        

        
          
        

      
    
        

        
          
        

      
    
        

      
    
        

        
          
        

        
        
      


<footer id="article-footer">
  <time id="article-last-updated" datetime="2024-04-09"><i class="icon icon-calendar"></i>&nbsp;Last updated: 2024-04-09</time>

  
    <a id="article-prev-link" href="/docs/codefuse-query-zh/"><i class="icon icon-prev icon-colored"></i> Prev</a>
  

  
    <a id="article-next-link"  href="/docs/codefuse-mft-vlm-zh/">Next <i class="icon icon-next icon-colored"></i></a>
  
</footer>
    </article>
    <aside id="toc">
  <span class="btn-close"><i class="icon icon-close"></i></span>
  <div class="sticky">
    <strong><i class="icon icon-toc"></i> On this page</strong>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#目录">目录</a></li>
    <li><a href="#新闻">新闻</a>
      <ul>
        <li><a href="#humaneval表现">HumanEval表现</a></li>
      </ul>
    </li>
    <li><a href="#文章">文章</a></li>
    <li><a href="#项目简介">项目简介</a>
      <ul>
        <li><a href="#项目框架">项目框架</a></li>
        <li><a href="#项目优势">项目优势</a></li>
      </ul>
    </li>
    <li><a href="#引用">引用</a></li>
  </ul>
</nav>
  </div>
</aside>
  </main>
</div>

    <footer id="site-footer">
  
  <div id="site-footer-copyright">
    <a href="https://github.com/codefuse-ai" target="_blank">
      <i class="icon icon-copyright"></i> 2023-2024 codefuse-ai
    </a>
  </div>

  
  <div id="site-footer-social">

    

    

    
    <a href="https://github.com/codefuse-ai" target="_blank" aria-label="github url">
      <i class="icon icon-github icon-colored"></i>
    </a>
    

    

  </div>

  
  <div id="site-footer-fund">

    

    

  </div>

  
  <div id="site-footer-love">
    Made with <i class="icon icon-love icon-colored"></i> &nbsp;from&nbsp;<a href="https://docura.github.io/" target="_blank">Docura</a>
  </div>
</footer>
    






<script type="text/javascript" src="/js/base.min.js"></script>




<script type="application/javascript">
    if('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js?2024-04-09')
            .catch(function(err) {console.error('ServiceWorker registration failed: ', err);});
    }
</script>
  </body>
</html>